@using SIGESDOC.Web.Seguridad

@model IEnumerable<SIGESDOC.Response.SeguimientoDhcpaResponse>

@{
    //WebGrid grid = new WebGrid(rowsPerPage: ServiceConfiguration.PageSize, ajaxUpdateContainerId: "grid");    grid.Bind(Model, autoSortAndPage: false, rowCount: ViewBag.TotalRows);
    ViewBag.Title = "Consulta Seguimiento";
}

<ol class="breadcrumb" style="margin-bottom: 5px;">
    <li><a href="#">Habilitaciones</a></li>
    <li class="active">Consulta Seguimiento</li>
</ol>

<div class="bs-callout bs-callout-info">
    <h4>Consulta Seguimiento</h4>
    <p>En esta sección usted puede Consultar el estado del seguimiento</p>
</div>

<div class="modal fade" id="mdl_lista_historial_evaluador" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Historial Evaluadores <label id="titulo_lista_historial_evaluador">  </label> </h4>
            </div>

            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="col-md-12">

                        <div id="grid_historial_evaluador">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tbl_lista_historial_evaluador">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Estado</th>
                                        <th scope="col">Evaluador</th>
                                        <th scope="col">Fecha recibido</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>

                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Salir</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="mdl_lista_observacion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Lista de Observaciones <label id="titulo_lista_observacion">  </label> </h4>

            </div>
            <input type="text" id="txt_id_oculto_observacion_seguimiento" class="hidden" />

            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="col-md-2 opc_add_observacion" style="text-align:left; ">
                        <button type="button" class="btn btn-primary btn-sm" id="add_observacion">Agregar Observacion</button>
                    </div>

                    <div class="col-md-12 opc_add_new_observacion" style="text-align:left; padding-top:15px; padding-bottom:15px;">
                        <textarea class="form-control input-sm" rows="4" maxlength="1000" placeholder="Ingresar la observación" id="txt_observacion"></textarea>
                        <label id="lbl_valida_observacion" style="color: #B44D4D"></label>
                    </div>

                    <div class="col-md-3 opc_add_new_observacion" style="text-align:left; ">
                        <button type="button" class="btn btn-primary btn-sm" id="add_guardar_observacion">Guardar Observacion</button>
                    </div>

                    <div class="col-md-2 opc_add_new_observacion" style="text-align:right; ">
                        <button type="button" class="btn btn-default btn-sm" id="add_cancelar_observacion">Cancelar</button>
                    </div>

                    <div class="col-md-12" style="text-align:center;">
                        <label class="control-label" style="font-weight: bold;">Listado de Observaciones</label>
                    </div>

                    <div class="col-md-12">

                        <div id="grid_observacion">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tbl_lista_observacion">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Observacion</th>
                                        <th scope="col">Usuario</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>


                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Salir</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="mdlConformidad_mts" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_titulo_mts">  </label>
                    <label id="titulo_mts">  </label>
                </h4>

            </div>
            <form method="post" id="formmts">
                <div class="modal-body">
                    <div class="form-horizontal">

                        <div id="progress_mts" class="progress hidden">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txtId_mts" class="hidden" />

                        <div id="menssage_mts">
                            <div class="form-group">
                                <div class="col-md-2">
                                    <label class="control-label">Tipo Seguimiento:</label>
                                </div>
                                <div class="col-md-10">
                                    @Html.DropDownList("cmb_mts", (IEnumerable<SelectListItem>)ViewBag.lst_combo_mts, new { @class = "form-control input-sm" })
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar_mts">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdlConformidad_asignar_planta" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_titulo_asignar_planta">  </label>
                    <label id="titulo_asignar_planta">  </label>
                </h4>

            </div>
            <form method="post" id="formplanta">
                <div class="modal-body">
                    <div class="form-horizontal">

                        <div id="progress_asignar_planta" class="progress hidden">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txtId_asignar_planta" class="hidden" />

                        <div id="menssage_asignar_planta">
                            <div class="form-group">
                                <div class="col-md-2">
                                    <label class="control-label" for="cmb_planta">Planta:</label>
                                </div>
                                <div class="col-md-10">
                                    @Html.DropDownList("cmb_planta", (IEnumerable<SelectListItem>)ViewBag.lst_combo, new { @class = "form-control input-sm" })
                                    <label id="lbl_valida_planta" style="color: #B44D4D">  </label>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar_asignar_planta">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod_asignar_planta">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdl_emb_add_seg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_titulo_emb_add_seg">  </label>
                    <label id="titulo_emb_add_seg">  </label>
                </h4>

            </div>
            <form method="post" id="form_add_embarcacion">
                <div class="modal-body">

                    <div id="mensaje_emb_add_seg"></div>
                    <div class="form-horizontal">

                        <div id="progress_emb_add" class="progress hidden">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txtId_emb_add_seg" class="hidden" />

                        <div class="form-group ">
                            <label class="col-md-2 control-label">Embarcación:</label>
                            <div class="col-md-4">
                                @Html.TextBox("num_matricula", null, new { @class = " form-control input-sm", @maxlength = "100", @onpaste = "return false;", @placeholder = "Matricula", @onkeypress = "return IsMatricula_vista(this.value);", @onkeyup = "return back_matricula(this.value);" })
                            </div>
                        </div>

                        <div class="act_embarcacion form-group">
                            <label class="col-md-2 control-label"></label>
                            <div class="col-md-6 ">
                                @Html.DropDownList("cmb_embarcacion", (IEnumerable<SelectListItem>)ViewBag.lst_embarcacion, new { @class = "form-control input-sm" })
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm disabled" id="btn_Aceptar_add_embarcacion">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod_embarcacion">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdlConformidad_desembarcadero" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_desembarcadero_add_seg">  </label>
                    <label id="titulo_desembarcadero_add_seg">  </label>
                </h4>

            </div>
            <form method="post" id="formdesembarcadero">
                <div class="modal-body">
                    <div class="form-horizontal">

                        <div id="progress_add_desembarcadero" class="progress hidden">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txtId_desembarcadero_add_seg" class="hidden" />

                        <div id="menssage_add_desembarcadero">
                            <div class="form-group">
                                <div class="col-md-2">
                                    <label class="control-label">Desembarcadero:</label>
                                </div>
                                <div class="col-md-10">
                                    @Html.DropDownList("cmb_desembarcadero", (IEnumerable<SelectListItem>)ViewBag.lst_combo, new { @class = "form-control input-sm" })
                                    <label id="lbl_valida_desembarcadero" style="color: #B44D4D" hidden="hidden">  </label>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar_desembarcadero">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod_desembarcadero">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdlConformidad_concesion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_concesion_add_seg">  </label>
                    <br />
                    <label id="titulo_concesion_add_seg">  </label>
                </h4>

            </div>
            <form method="post" id="formconcesion">
                <div class="modal-body">
                    <div class="form-horizontal">

                        <div id="progress_concesion" class="progress_concesion hidden">
                            <div class="progress_concesion progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txtId_concesion_add_seg" class="hidden" />

                        <div id="menssage_concesion">
                            <div class="form-group">
                                <div class="col-md-8">
                                    <label class="control-label">Concesión /Centro de Cultivo /Hatchery : </label>
                                </div>
                                <br />
                                <div class="col-md-10">
                                    @Html.DropDownList("cmb_concesion", (IEnumerable<SelectListItem>)ViewBag.lst_combo, new { @class = "form-control input-sm" })
                                    <label id="lbl_valida_concesion" style="color: #B44D4D">  </label>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar_add_concesion">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod_concesion">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdlConformidad_almacen" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_almacen_add_seg">  </label>
                    <label id="titulo_alma_add_seg">  </label>
                </h4>

            </div>
            <form method="post" id="formalmacen">
                <div class="modal-body">
                    <div class="form-horizontal">

                        <div id="progress_almacen" class="progress_almacen hidden">
                            <div class="progress_almacen progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txtId_alma_add_seg" class="hidden" />

                        <div id="menssage_almacen">
                            <div class="form-group">
                                <div class="col-md-2">
                                    <label class="control-label">Almacén:</label>
                                </div>
                                <div class="col-md-10">
                                    @Html.DropDownList("cmb_almacen", (IEnumerable<SelectListItem>)ViewBag.lst_combo, new { @class = "form-control input-sm" })
                                    <label id="lbl_valida_almacen" style="color: #B44D4D">  </label>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar_add_almacen">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod_almacen">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdl_detalle" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Documentos Emitidos <label id="titulo_50">  </label> </h4>

            </div>

            <div class="modal-body">
                <div class="form-horizontal">

                    <label class="control-label" style="font-weight: bold;">Listado de Solicitudes de Inspección</label>

                    <div class="row">

                        <div id="grid_solicitud">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tblSolicitud">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col"> </th>
                                        <th scope="col">Estado</th>
                                        <th scope="col">Documento</th>
                                        <th scope="col">Fecha</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>
                    <label class="control-label" style="font-weight: bold;">Listado de Informes Técnico de evaluación</label>

                    <div class="row">

                        <div id="grid_informe">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tblInformes">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Documento</th>
                                        <th scope="col">Fecha</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>

                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Salir</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="mdl_detalle_2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Documentos <label id="titulo_80">  </label> </h4>

            </div>

            <div class="modal-body">
                <div class="form-horizontal">

                    <label class="control-label" style="font-weight: bold;">Listado de Documentos Recibidos</label>

                    <div class="row">

                        <div id="grid_recibidos">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tblrecibidos">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col"> </th>
                                        <th scope="col">Identificador</th>
                                        <th scope="col">Documento</th>
                                        <th scope="col">Asunto</th>
                                        <th scope="col">Fecha Documento</th>
                                        <th scope="col">Fecha Recibido</th>
                                        <th scope="col">Opciones</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>

                    <label class="control-label" style="font-weight: bold;">Listado de Documentos Emitidos</label>

                    <div class="row">

                        <div id="grid_emitidos">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tblemitidos">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Documento</th>
                                        <th scope="col">Asunto</th>
                                        <th scope="col">Fecha</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>

                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Salir</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="mdl_detalle_3_transporte" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Lista de Protocolos <label id="titulo_100_transporte">  </label> </h4>

            </div>

            <div class="modal-body">
                <div class="form-horizontal">

                    <label class="control-label" style="font-weight: bold;">Listado de Protocolos Emitidos</label>

                    <div class="row">

                        <div id="grid_protocolos_transporte">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tbl_lista_protocolos_transporte">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Protocolo</th>
                                        <th scope="col">Fecha inicio</th>
                                        <th scope="col">Fecha Fin</th>
                                        <th scope="col">Estado</th>
                                        <th scope="col">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>

                    <div class="row">

                        <div id="grid_haccp_transporte">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tbl_lista_haccp_transporte">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Constancia HACCP</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Salir</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="mdl_detalle_3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Lista de Protocolos <label id="titulo_100">  </label> </h4>

            </div>

            <div class="modal-body">
                <div class="form-horizontal">

                    <label class="control-label" style="font-weight: bold;">Listado de Protocolos Emitidos</label>

                    <div class="row">

                        <div id="grid_protocolos">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tbl_lista_protocolos">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Protocolo</th>
                                        <th scope="col">Fecha inicio</th>
                                        <th scope="col">Fecha Fin</th>
                                        <th scope="col">Estado</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>

                    <div class="row">

                        <div id="grid_haccp">
                            <table class="table table-striped table-hover table-condensed tabla small" data-swhgajax="true" data-swhgcontainer="grid" data-swhgcallback="" id="tbl_lista_haccp">
                                <thead>
                                    <tr class="cabecera">
                                        <th scope="col">Constancia HACCP</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Salir</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="mdl_detalle_4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel"> Asignar Expediente  <label id="titulo_120">  </label> </h4>

            </div>

            <form method="post" id="formexpediente">
                <div class="modal-body">
                    <div class="form-horizontal">

                        <div id="progress_expediente" class="progress hidden">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txt_id_seguimiento_expediente" class="hidden" />

                        <div id="menssage_expediente">
                            <div class="form-group">
                                <div class="col-md-2">
                                    <label class="control-label" for="cmb_expediente">Expediente:</label>
                                </div>
                                <div class="col-md-10">
                                    @Html.DropDownList("cmb_expediente", (IEnumerable<SelectListItem>)ViewBag.lst_expediente, new { @class = "form-control input-sm" })
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar_expediente">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod_expediente">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdlasignar_evaluador" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label> Asignar Evaluador </label>
                </h4>
            </div>
            <form method="post" id="formevaluador">
                <div class="modal-body">
                    <div class="form-horizontal">

                        <div id="progress" class="progress hidden">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txt_id_seguimiento" class="hidden" />

                        <div id="menssage">
                            <div class="form-group">
                                <div class="col-md-2">
                                    <label class="control-label" for="cmb_evaluador">Evaluador:</label>
                                </div>
                                <div class="col-md-10">
                                    @Html.DropDownList("cmb_evaluador", (IEnumerable<SelectListItem>)ViewBag.lst_evaluador, new { @class = "form-control input-sm" })
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdl_constancia_add_seg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_titulo_constancia_add_seg">  </label>
                    <label id="titulo_constancia_add_seg">  </label>
                </h4>

            </div>
            <form method="post" id="form_add_constancia">
                <div class="modal-body">

                    <div id="mensaje_constancia_add_seg"></div>
                    <div class="form-horizontal">

                        <div id="progress_constancia_add" class="progress hidden">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" style="width: 100%">
                                    <p>Procesando</p>
                                </div>
                            </div>
                        </div>

                        <input type="text" id="txtId_constancia_add_seg" class="hidden" />

                        <div class="form-group ">
                            <label class="col-md-4 control-label">Constancia HACCP:</label>
                            <div class="col-md-6">
                                @Html.TextBox("txt_constancia", null, new { @class = " form-control input-sm", @maxlength = "150", @placeholder = "Ingresar la Constancia Haccp" })
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="btn_Aceptar_add_constancia">Aceptar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_can_mod_constancia">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="mdlConformidad2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    <label id="txt_titulo_2">  </label>
                    <label id="titulo_2">  </label>
                </h4>
            </div>
            <div class="modal-body">
                <div id="mensajesPopup"></div>
                <div id="progress" class="progress hidden">
                    <div class="progress progress-striped active">
                        <div class="progress-bar" style="width: 100%">
                            <p>Procesando</p>
                        </div>
                    </div>
                </div>

                <div class="form-horizontal">
                    <div class="form-group">
                        @Html.Label("", "Duración Trámite:", new { @class = "col-lg-2 control-label", @style = "padding-top:4px;" })
                        <div class="col-lg-2">
                            @Html.TextBox("txt_fin_tiempo_tramite", null, new { @class = "form-control input-sm", @onpaste = "return false;", @maxlength = "10", @onkeypress = "return IsNumeric(this.value);" })
                        </div>
                        @Html.Label("", "Duración SDHPA:", new { @class = "col-lg-2 control-label", @style = "padding-top:4px; width:160px;" })
                        <div class="col-lg-2">
                            @Html.TextBox("txt_fin_tiempo_sdhpa", null, new { @class = "form-control input-sm", @onpaste = "return false;", @maxlength = "10", @onkeypress = "return IsNumeric(this.value);" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("", "Observacion:", new { @class = "col-lg-2 control-label" })
                        <div class="col-lg-8">
                            @Html.TextArea("txt_fin_observacion_final", null, new { @class = "form-control input-sm", rows = "4", @maxlength = "1500", wrap = "off" })
                        </div>
                    </div>


                    <div class="form-group">
                        @Html.Label("", "Inspector Designado:", new { @class = "col-lg-2 control-label" })
                        <div class="col-lg-8">
                            @Html.TextBox("txt_inspector_designado", null, new { @class = "form-control input-sm", @maxlength = "100" })
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-lg-3" style="width:150px;">
                            <div class="checkbox">
                                @Html.CheckBox("chck_fecha_auditoria")
                                @Html.Label("Fecha auditoria")
                            </div>
                        </div>
                        <div class="col-lg-2" style="width:160px">
                            <div class="input-group date input-group-sm" id="dtpFechauditoria">
                                <input class="form-control input-sm" id="txtFechauditoria" type="text" value="">
                                <span class="input-group-addon input-sm add-on">
                                    <a href="#">
                                        <i class="glyphicon glyphicon-calendar" data-date-icon="glyphicon glyphicon-calendar"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                        <div class="col-lg-3" style="width:140px;">
                            <div class="checkbox">
                                @Html.CheckBox("chck_fecha_acta")
                                @Html.Label("Fecha Acta")
                            </div>
                        </div>
                        <div class="col-lg-2" style="width:160px">
                            <div class="input-group date input-group-sm" id="dtpFechacta">
                                <input class="form-control input-sm" id="txtFechacta" type="text" value="">
                                <span class="input-group-addon input-sm add-on">
                                    <a href="#">
                                        <i class="glyphicon glyphicon-calendar" data-date-icon="glyphicon glyphicon-calendar"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <p class="row">
                            <div class="col-lg-3" style="width:150px;">
                                <div class="checkbox">
                                    @Html.CheckBox("chck_fecha_oficio")
                                    @Html.Label("Fecha envio de")
                                </div>
                            </div>
                            <div class="col-lg-2" style="width:160px">
                                <div class="input-group date input-group-sm" id="dtpFechaoficio">
                                    <input class="form-control input-sm" id="txtFechaoficio" type="text" value="">
                                    <span class="input-group-addon input-sm add-on">
                                        <a href="#">
                                            <i class="glyphicon glyphicon-calendar" data-date-icon="glyphicon glyphicon-calendar"></i>
                                        </a>
                                    </span>
                                </div>
                            </div>
                        </p>
                        <br />
                        <p class="row" style="margin:0px">
                            <div class="col-lg-3" style="padding-left:35px;">
                                @Html.Label("oficio-sdhpa")
                            </div>
                        </p>
                    </div>



                    <div class="form-group">
                        @Html.Label("", "Con Proceso:", new { @class = "col-lg-2 control-label" })

                        <div class="col-lg-8">
                            @Html.TextArea("txt_finalizar_con_proceso", null, new { @class = "form-control input-sm", rows = "4", @maxlength = "1000", wrap = "off" })
                        </div>
                    </div>


                    <div class="form-group">
                        <div id="menssage">
                            <span id="conformidad"></span>
                            <p>¿Está seguro de finalizar el seguimiento?.</p>
                            <input type="text" id="txtId5" class="hidden" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" id="bntConfirmar2">Si</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" id="btn_cancelar2">No</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="panel panel-primary">
    <div class="panel-heading panet-heading-sm">Búsqueda de Seguimiento</div>
    <div class="panel-body">
        @using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "Get" }))
        {

            <div class="row">
                <div class="col-lg-3">
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon">Expediente</span>
                        @Html.TextBox("expediente", null, new { @class = "form-control input-sm", @maxlength = "50" })
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon">Razón social</span>
                        @Html.TextBox("externo", null, new { @class = "form-control input-sm", @maxlength = "300" })
                    </div>
                </div>

                <div class="col-lg-3">
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon">habilitante</span>
                        @Html.TextBox("habilitante", null, new { @class = "form-control input-sm", @maxlength = "100" })
                    </div>
                </div>

            </div>

            <br />

            <div class="row">

                <div class="col-lg-3">
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon">Evaluador: </span>
                        @Html.DropDownList("cbo_cons_evaluador", (IEnumerable<SelectListItem>)ViewBag.lst_evaluador_consulta, new { @class = "form-control input-sm" })
                    </div>
                </div>

                <div class="col-lg-3">
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon">Estado: </span>
                        @Html.DropDownList("cmbestado", (IEnumerable<SelectListItem>)ViewBag.lst_estado, new { @class = "form-control input-sm" })
                    </div>
                </div>

                <div class="col-lg-2">
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon">Tupa: </span>
                        @Html.DropDownList("cmbtupa", (IEnumerable<SelectListItem>)ViewBag.lst_tupa, new { @class = "form-control input-sm" })
                    </div>
                </div>

                <div class="col-lg-1">
                    <input type="submit" id="btnBuscar" class="btn btn-primary btn-sm pull-left" value="Actualizar" />
                </div>


            </div>
        }
    </div>
</div>

<button id="export_excel" type="button" style="background-color:green; border:1px solid white; color:white;"> Exportar Excel</button>

<br />
<br />

<div id="grid">
    <table id="grid_seguimiento" class="table table-striped table-hover table-condensed table-bordered tabla small">
        <thead>
            <tr class="cabecera text-center">
                <th scope="col" class="visible-lg">Fecha Inicio</th>
                <th scope="col">Expediente</th>
                <th scope="col" class="visible-lg visible-md">TUPA</th>
                <th scope="col" class="visible-lg visible-md">Procedimiento</th>
                <th scope="col">Externo</th>
                <th scope="col" class="visible-lg visible-md">Habilitante</th>
                <th scope="col" class="visible-lg">Evaluador</th>
                <th scope="col" class="visible-lg">Estado</th>
                <th scope="col">Opciones</th>
            </tr>
        </thead>
        <tbody>
            @if (ViewData["Seguimiento_Tabla"] != null)
            {
                foreach (System.Data.DataRow dr in (ViewData["Seguimiento_Tabla"] as System.Data.DataTable).Rows)
                {
                    <tr>

                        <td class="visible-lg" style=" text-align:center;"> @dr["Fecha Inicio"] </td>
                        <td style=" text-align:center;"> @dr["Expediente"] </td>
                        <td class="visible-lg visible-md" style=" text-align:center;"> @dr["TUPA/SERV"] </td>
                        <td class="visible-lg visible-md"> @dr["Procedimiento"] </td>
                        <td> @dr["Externo"] </td>
                        <td class="visible-lg visible-md"> @dr["Habilitante"] </td>
                        <td class="visible-lg" style=" text-align:center;"> @dr["Evaluador"] </td>
                        <td class="visible-lg" style=" text-align:center;"> @dr["Estado"]</td>
                        <td style="text-align:center;">
                            <ul class="list-inline" style="margin-bottom:0">
                                <li>
                                    @if ((string)dr["cond_habilitante"] == "True" && (string)dr["cond_finalizar"] == "True")  // 1: Planta
                                    {
                                        <a class="modificar_tipo_seguimiento" id=@dr["Expediente_Id_seguimiento"] href="#"> MTS </a>
                                    }
                                </li>

                                <li>
                                    @if ((string)dr["id_tipo_seguimiento"] == "1" && (string)dr["cond_habilitante"] == "True" && (string)dr["cond_finalizar"] == "True")  // 1: Planta
                                    {
                                        <a class="Asignar_planta" id=@dr["Expediente_Id_seguimiento_Id_ofi_dir"] href="#" title="Asignar Planta">
                                            <img height="22" src="/Content/iconos/icono-planta.png" width="16.8">
                                        </a>
                                    }
                                    else
                                    {
                                        if ((string)dr["id_tipo_seguimiento"] == "2" && (string)dr["cond_habilitante"] == "True" && (string)dr["cond_finalizar"] == "True") // 2 : Embarcacion
                                        {
                                            <a class="Asignar_embarcacion" id=@dr["Expediente_Id_seguimiento_Id_ofi_dir"] href="#" title="Asignar Embarcación">
                                                <img height="22" src="/Content/iconos/icono-barco.png" width="16.8">
                                            </a>
                                        }
                                        else
                                        {
                                            if ((string)dr["id_tipo_seguimiento"] == "3" && (string)dr["cond_habilitante"] == "True" && (string)dr["cond_finalizar"] == "True") // 3 : Desembarcadero
                                            {
                                                <a class="Asignar_desembarcadero" id=@dr["Expediente_Id_seguimiento_Id_ofi_dir"] href="#" title="Desembarcadero/Puntos de Descarga/Muelles de Descarga/Sistema de Descarga">
                                                    <img height="22" src="/Content/iconos/icono-desembarcadero.png" width="16.8">
                                                </a>
                                            }

                                            else
                                            {
                                                if ((string)dr["id_tipo_seguimiento"] == "4" && (string)dr["cond_habilitante"] == "True" && (string)dr["cond_finalizar"] == "True") // 4 : Concesion
                                                {
                                                    <a class="Asignar_concesion" id=@dr["Expediente_Id_seguimiento_documento"] href="#" title="Asignar Concesión/Centro de Cultivo/Hatchery">
                                                        <img height="22" src="/Content/iconos/icono-concesion.png" width="16.8">
                                                    </a>
                                                }
                                                else
                                                {
                                                    if ((string)dr["id_tipo_seguimiento"] == "6" && (string)dr["cond_habilitante"] == "True" && (string)dr["cond_finalizar"] == "True") // 6 : Almacen
                                                    {
                                                        <a class="Asignar_almacen" id=@dr["Expediente_Id_seguimiento_Id_ofi_dir"] href="#" title="Asignar Almacén">
                                                            <img height="22" src="/Content/iconos/icono-almacen.png" width="16.8">
                                                        </a>
                                                    }
                                                }
                                            }
                                        }
                                    }
                                </li>


                                <li>
                                    @if ((string)dr["cond_expediente"] == "True")
                                    {
                                        <a class="asignar_expediente" id=@dr["Expediente_Id_seguimiento"] href="#" title="Asignar Expediente">
                                            <i class="blue glyphicon glyphicon-edit"></i>
                                        </a>
                                    }
                                </li>

                                <li>
                                    @if ((string)dr["cond_expediente"] == "False") // False(Expediente): Con Expediente - True(Finalizar): No finaliza
                                    {
                                        if ((string)dr["id_tipo_seguimiento"] == "1" && (string)dr["cond_habilitante"] != "True")  // 1: Planta
                                        {
                                            <a class="Crear_Protocolo" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">

                                                <i class="blue glyphicon glyphicon-ok-circle"></i>
                                            </a>
                                        }
                                        else
                                        {
                                            if ((string)dr["id_tipo_seguimiento"] == "2" && (string)dr["cond_habilitante"] != "True")  // 2: Embarcacion
                                            {
                                                <a class="Crear_Protocolo_Embarcacion" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">
                                                    <i class="blue glyphicon glyphicon-ok-circle"></i>
                                                </a>
                                            }
                                            else
                                            {
                                                if ((string)dr["id_tipo_seguimiento"] == "3" && (string)dr["cond_habilitante"] != "True")  // 3: Desembarcadero
                                                {
                                                    <a class="Crear_Protocolo_Desembarcadero" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">
                                                        <i class="blue glyphicon glyphicon-ok-circle"></i>
                                                    </a>
                                                }
                                                else
                                                {
                                                    if ((string)dr["id_tipo_seguimiento"] == "4" && (string)dr["cond_habilitante"] != "True")  // 4: Concesion
                                                    {
                                                        <a class="Crear_Protocolo_Concesion" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">
                                                            <i class="blue glyphicon glyphicon-ok-circle"></i>
                                                        </a>
                                                    }
                                                    else
                                                    {
                                                        if ((string)dr["id_tipo_seguimiento"] == "5")  // 5: Transporte
                                                        {
                                                            <a class="Crear_Protocolo_Transporte" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">
                                                                <i class="blue glyphicon glyphicon-ok-circle"></i>
                                                            </a>
                                                        }
                                                        else
                                                        {
                                                            if ((string)dr["id_tipo_seguimiento"] == "6" && (string)dr["cond_habilitante"] != "True")  // 6: Almacen
                                                            {
                                                                <a class="Crear_Protocolo_Almacen" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">
                                                                    <i class="blue glyphicon glyphicon-ok-circle"></i>
                                                                </a>
                                                            }
                                                            else
                                                            {
                                                                if ((string)dr["id_tipo_seguimiento"] == "7")  // 7: Autorización de instalación
                                                                {
                                                                    <a class="Crear_Protocolo_Autorizacion_instalacion" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">
                                                                        <i class="blue glyphicon glyphicon-ok-circle"></i>
                                                                    </a>
                                                                }
                                                                else
                                                                {
                                                                    if ((string)dr["id_tipo_seguimiento"] == "8")  // 8: Licencia de Operacion
                                                                    {
                                                                        <a class="Crear_Protocolo_Licencia_Operacion" id=@dr["Expediente_Id_seguimiento"] href="#" title="Nuevo Protocolo">
                                                                            <i class="blue glyphicon glyphicon-ok-circle"></i>
                                                                        </a>
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                </li>
                                <li>
                                    @if ((string)dr["cond_finalizar"] == "True")
                                    {
                                        <a class="constancia_haccp" id=@dr["Expediente_Id_seguimiento"] href="#" title="Constancia HACCP"> <i class="blue glyphicon glyphicon-file"></i> </a>
                                    }
                                </li>
                                <li>
                                    @if ((string)dr["cond_finalizar"] == "True")
                                    {
                                        <a class="Finalizar_seguimiento" id=@dr["Expediente_Id_seguimiento_duracion_sdhpa_duracion_tramite_observacion"] href="#" title="Finalizar">
                                            <i class="blue glyphicon glyphicon-off"></i>
                                        </a>
                                    }
                                </li>

                                <li> <a class="ver_documentos_emitidos" id=@dr["Expediente_Id_seguimiento"] href="#" title="Ver Listado Solic. e Inf."><i class="blue glyphicon glyphicon-th-list"></i></a></li>
                                <li> <a class="ver_documentos_otros" id=@dr["Expediente_Id_seguimiento"] href="#" title="Doc. Recibidos y Enviados"> <i class="red glyphicon glyphicon-th-list"></i> </a> </li>
                                <li>
                                    @if ((string)dr["id_tipo_seguimiento"] == "5")  // 5: Transporte
                                    {
                                        <a class="ver_protocolos_transporte" id=@dr["Expediente_Id_seguimiento"] href="#" title="Ver Listado de Protocolos y Constancia HACCP"> <i class="green glyphicon glyphicon-th-list"></i> </a>
                                    }
                                    else
                                    {
                                        <a class="ver_protocolos" id=@dr["Expediente_Id_seguimiento"] href="#" title="Ver Listado de Protocolos y Constancia HACCP"> <i class="green glyphicon glyphicon-th-list"></i> </a>
                                    }
                                </li>

                                <li>
                                    <a class="ver_observacion" id=@dr["Expediente_Id_seguimiento_cond_finalizar"] href="#" title="Lista de Observacion">
                                        <i class="black glyphicon glyphicon-th-list"></i>
                                    </a>
                                </li>
                                <li>
                                    <a class="ver_historial_evaluadores" id=@dr["Expediente_Id_seguimiento"] href="#" title="Historial de Evaluadores">
                                        <img height="22" src="/Content/iconos/glyphicons-44-group.png" width="16.8">
                                    </a>
                                </li>
                                <li> <a class="Asignar" id=@dr["Id_seguimiento"] href="#" title="Asignar"> <i class="blue glyphicon glyphicon-user"></i> </a> </li>
                            </ul>
                        </td>
                    </tr>
                }
            }
        </tbody>

    </table>
</div>

<script type="text/javascript">


    function IsMatricula_vista(dato) {
        if (window.event.keyCode == 8) {
            $('.act_embarcacion').hide();
            $('#btn_Aceptar_add_embarcacion').addClass("disabled")
        }
        var valor = dato.indexOf(".");
        var evento = window.event || dato;
        var escrito = (dato + String.fromCharCode(evento.charCode)).trim();
        if (escrito.length > 2) {
            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.RouteUrl("recupera_embarcacion"))",
                data: { "MATRICULA": escrito },
                success: function (data) {
                    $("#cmb_embarcacion").html('');
                    $.each(data, function (id, option) {
                        if (option.Value != "NO") {
                            $("#cmb_embarcacion").append($('<option></option>').val(option.Value).html(option.Text));
                            $('.act_embarcacion').show();
                            $('#btn_Aceptar_add_embarcacion').removeClass("disabled")
                        }
                        else {
                            $('.act_embarcacion').hide();
                            $('#btn_Aceptar_add_embarcacion').addClass("disabled")
                        }
                    });
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert('Failed to retrieve states.');
                }
            });
        }
    };

    function back_matricula(dato) {
        if (window.event.keyCode == 8) {
            $('.act_embarcacion').hide();
            $('#btn_Aceptar_add_embarcacion').addClass("disabled")
        }
    }



    $(document).ready(function () {

        $('#export_excel').click(function () {
            var url = "/Habilitaciones/Exportar_Excel_Expediente_Evaluador";
            var win = window.open(url, '_blank');
        });

        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //
        // VARIABLES INICIAL PAGINA
        //
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////

        var f = new Date();
        var fechaActual = (f.getDate() < 10 ? "0" + f.getDate() : f.getDate()) + "/" + ((f.getMonth() + 1) < 10 ? "0" + (f.getMonth() + 1) : (f.getMonth() + 1)) + "/" + f.getFullYear();

        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //
        // FIN VARIABLES PAGINA
        //
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////

        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //
        // MODAL FINALIZAR
        //
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////

        $("#txtFechauditoria").val(fechaActual);
        $("#txtFechacta").val(fechaActual);
        $("#txtFechaoficio").val(fechaActual);


        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //
        // END MODAL FINALIZAR
        //
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////


        $('.act_embarcacion').hide();
        $('#btn_Aceptar_add_embarcacion').addClass("disabled");

        $(document).on('click', '.modificar_tipo_seguimiento', function () {
            var id_seguimiento = $(this).attr('id').split('|');
            document.getElementById('txt_titulo_mts').innerHTML = "Aviso - Modificar Tipo Seguimiento - ";
            document.getElementById('titulo_mts').innerHTML = id_seguimiento[0];
            $('#txtId_mts').val(id_seguimiento[1]);
            $('#mdlConformidad_mts').modal();
        });

        $(document).on('click', '.Asignar_planta', function () {
            var id_seguimiento = $(this).attr('id').split('|');
            document.getElementById('txt_titulo_asignar_planta').innerHTML = "Aviso - Asignar Planta - ";
            document.getElementById('titulo_asignar_planta').innerHTML = id_seguimiento[0];
            $('#txtId_asignar_planta').val(id_seguimiento[1]);
            var ddlplanta = $("#cmb_planta");
            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.RouteUrl("recupera_PLANTA_vista"))",
                data: { "ID_DIRECCION": id_seguimiento[2] },
                success: function (data) {
                    ddlplanta.html('');
                    $.each(data, function (id, option) {
                        ddlplanta.append($('<option></option>').val(option.Value).html(option.Text));
                    });
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert('Failed to retrieve states.');
                }
            });
            $('#mdlConformidad_asignar_planta').modal();
        });


        $('#add_observacion').click(function () {
            $('.opc_add_observacion').hide();
            $('.opc_add_new_observacion').show();
            $("#txt_observacion").val("");
            document.getElementById('lbl_valida_observacion').innerHTML = "";
        });

        $('#add_cancelar_observacion').click(function () {
            $('.opc_add_observacion').show();
            $('.opc_add_new_observacion').hide();
        });

        $('#add_guardar_observacion').click(function () {

            if ($("#txt_observacion").val() != "") {
                $.ajax({
                    cache: false,
                    type: "GET",
                    url: "/Habilitaciones/Guardar_Observacion_x_seguimiento",
                    data: {
                        "id_seguimiento": $("#txt_id_oculto_observacion_seguimiento").val(),
                        "observacion": $("#txt_observacion").val()
                    },
                    success: function (result) {
                        var nuevoTD = '<tr>';
                        nuevoTD += '<td>' + $("#txt_observacion").val() + '</td>';
                        nuevoTD += '<td>' + result.usuario_crea + '</td>';
                        nuevoTD += '</tr>';
                        jQuery("#tbl_lista_observacion").append(nuevoTD);
                        $('.opc_add_observacion').show();
                        $('.opc_add_new_observacion').hide();
                    }
                });
            }
            else {
                document.getElementById('lbl_valida_observacion').innerHTML = "Debe de ingresar la observación en el recuadro";
            }
        });

        $(document).on('click', '.ver_historial_evaluadores', function () {

            $('#mdl_lista_historial_evaluador').modal('show');

            var id_seguimiento = $(this).attr('id').split('|');
            document.getElementById('titulo_lista_historial_evaluador').innerHTML = " - " + id_seguimiento[0];

            $("#tbl_lista_historial_evaluador td").remove();

            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.RouteUrl("Listar_historial_evaluador"))",
                data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    nuevoTD += '<td>' + option.estado + '</td>';
                    nuevoTD += '<td>' + option.paterno + ' ' + option.materno + ' ' + option.nombres + '</td>';
                    nuevoTD += '<td>' + option.fecha_recibido + '</td>';
                    nuevoTD += '</tr>';

                    jQuery("#tbl_lista_historial_evaluador").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

        });

        $(document).on('click', '.ver_observacion', function () {

            $('.opc_add_observacion').hide();
            $('.opc_add_new_observacion').hide();


            $('#mdl_lista_observacion').modal('show');
            var id_seguimiento = $(this).attr('id').split('|');

            document.getElementById('lbl_valida_observacion').innerHTML = "";
            document.getElementById('titulo_lista_observacion').innerHTML = " - " + id_seguimiento[0];

            if (id_seguimiento[2] == "True") {
                $('.opc_add_observacion').show();
            }
            $("#txt_id_oculto_observacion_seguimiento").val(id_seguimiento[1]);
            $("#tbl_lista_observacion td").remove();

            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.RouteUrl("Listar_Observacion_x_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    nuevoTD += '<td>' + option.observacion + '</td>';
                    nuevoTD += '<td>' + option.nombre_persona_crea + '</td>';
                    nuevoTD += '</tr>';

                    jQuery("#tbl_lista_observacion").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

    });


    $('#btn_Aceptar_mts').click(function () {

        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Cambiar_Tipo_seguimiento",
            data: {
                "id_seguimiento": $('#txtId_mts').val(),
                "id_tipo_seguimiento": $("#cmb_mts").val()
            },
            beforeSend: function () {
                $('#menssage_mts').addClass("hidden");
                $('#progress_mts').removeClass("hidden").addClass("show");
                $('#btn_Aceptar_mts').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress_mts').removeClass("show").addClass("hidden");
                $('#btn_Aceptar_mts').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $("#mensajesPopup").html(result).hide();
                $("#mensajesPopup").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId_mts').val('');
                    $("#mensajesPopup").hide();
                    $('#mdlConformidad_mts').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            }
        });

    });

    $('#btn_Aceptar_asignar_planta').click(function () {

        document.getElementById('lbl_valida_planta').innerHTML = "";

        if ($("#cmb_planta").val() == "") {
            document.getElementById('lbl_valida_planta').innerHTML = "Seleccionar Planta";
            return;
        }

        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Asignar_habilitante",
            data: {
                "id_seguimiento": $('#txtId_asignar_planta').val(),
                "id_habilitante": $("#cmb_planta").val(),
                "codigo_habilitante": $("#cmb_planta :selected").text()
            },
            beforeSend: function () {
                $('#menssage_asignar_planta').addClass("hidden");
                $('#progress_asignar_planta').removeClass("hidden").addClass("show");
                $('#btn_Aceptar_asignar_planta').attr("disabled", "disabled");
                $('#btn_can_mod_asignar_planta').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress_asignar_planta').removeClass("show").addClass("hidden");
                $('#btn_Aceptar_asignar_planta').removeAttr("disabled", "disabled");
                $('#btn_can_mod_asignar_planta').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#mensajesPopup").html(result).hide();
                $("#mensajesPopup").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId_asignar_planta').val('');
                    $("#mensajesPopup").hide();
                    $('#mdlConformidad_asignar_planta').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });

    });

    $(document).on('click', '.Asignar_embarcacion', function () {

        var id_seguimiento = $(this).attr('id').split('|'); // expediente - id seguimiento - id oficina direccion
        document.getElementById('txt_titulo_emb_add_seg').innerHTML = "Aviso - Asignar Embarcacion - ";
        document.getElementById('titulo_emb_add_seg').innerHTML = id_seguimiento[0];
        $('#txtId_emb_add_seg').val(id_seguimiento[1]);

        $('.act_embarcacion').hide();
        $('#btn_Aceptar_add_embarcacion').addClass("disabled")
        $("#num_matricula").val("");

        $('#mdl_emb_add_seg').modal();

    });

    $('#btn_Aceptar_add_embarcacion').click(function () {

        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Asignar_habilitante",
            data: {
                "id_seguimiento": $('#txtId_emb_add_seg').val(),
                "id_habilitante": $("#cmb_embarcacion").val(),
                "codigo_habilitante": $("#cmb_embarcacion :selected").text()
            },
            beforeSend: function () {
                $('#progress_emb_add').removeClass("hidden").addClass("show");
                $('#btn_Aceptar_add_embarcacion').attr("disabled", "disabled");
                $('#btn_can_mod_embarcacion').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress_emb_add').removeClass("show").addClass("hidden");
                $('#btn_Aceptar_add_embarcacion').removeAttr("disabled", "disabled");
                $('#btn_can_mod_embarcacion').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#mensajesPopup").html(result).hide();
                $("#mensajesPopup").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId_emb_add_seg').val('');
                    $("#mensaje_emb_add_seg").hide();
                    $('#mdl_emb_add_seg').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });
    });

    $(document).on('click', '.Asignar_desembarcadero', function () {
        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('txt_desembarcadero_add_seg').innerHTML = "Aviso - Asignar Desembarcadero / Punto de Descarga / Muelles de Descarga / Sistema de Descarga - ";
        document.getElementById('titulo_desembarcadero_add_seg').innerHTML = id_seguimiento[0];
        $('#txtId_desembarcadero_add_seg').val(id_seguimiento[1]);
        var ddldesembarcadero = $("#cmb_desembarcadero");
        $.ajax({
            cache: false, type: "GET", url: "@(Url.RouteUrl("recupera_DESEMBARCADERO_vista"))", data: { "ID_DIRECCION": id_seguimiento[2] },
            success: function (data) {
                ddlconcesion.html('');
                $.each(data, function (id, option) {
                    ddlconcesion.append($('<option></option>').val(option.Value).html(option.Text));
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });
        $('#mdlConformidad_desembarcadero').modal();
    });

    $('#btn_Aceptar_desembarcadero').click(function () {

        document.getElementById('lbl_valida_desembarcadero').innerHTML = "";
        $("#lbl_valida_desembarcadero").attr("hidden", "hidden");

        if ($("#cmb_desembarcadero").val() == "") {
            document.getElementById('lbl_valida_desembarcadero').innerHTML = "Seleccionar Desembarcadero";
            $("#lbl_valida_desembarcadero").removeAttr("hidden", "hidden");
            return false;
        }

        $.ajax({
            cache: false, type: "GET", url: "/Habilitaciones/Asignar_habilitante",
            data: {
                "id_seguimiento": $('#txtId_desembarcadero_add_seg').val(),
                "id_habilitante": $("#cmb_desembarcadero").val(),
                "codigo_habilitante": $("#cmb_desembarcadero :selected").text()
            },
            beforeSend: function () {
                $('#menssage_add_desembarcadero').addClass("hidden");
                $('#progress_add_desembarcadero').removeClass("hidden").addClass("show");
                $('#btn_Aceptar_desembarcadero').attr("disabled", "disabled");
                $('#btn_can_mod_desembarcadero').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress_add_desembarcadero').removeClass("show").addClass("hidden");
                $('#btn_Aceptar_desembarcadero').removeAttr("disabled", "disabled");
                $('#btn_can_mod_desembarcadero').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#mensajesPopup").html(result).hide();
                $("#mensajesPopup").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId_desembarcadero_add_seg').val('');
                    $("#mensajesPopup").hide();
                    $('#mdlConformidad_desembarcadero').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });

    });

    $(document).on('click', '.Asignar_concesion', function () {
        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('txt_concesion_add_seg').innerHTML = "Aviso - Asignar Concesión / Centro de Cultivo / Hatchery - ";
        document.getElementById('titulo_concesion_add_seg').innerHTML = id_seguimiento[0];
        $('#txtId_concesion_add_seg').val(id_seguimiento[1]);
        var ddlconcesion = $("#cmb_concesion");
        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("recupera_CONCESION_vista"))",
            data: { "DOCUMENTO": id_seguimiento[2] },
            success: function (data) {
                ddlconcesion.html('');
                $.each(data, function (id, option) {
                    ddlconcesion.append($('<option></option>').val(option.Value).html(option.Text));
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });
        $('#mdlConformidad_concesion').modal();
    });

    $('#btn_Aceptar_add_concesion').click(function () {

        document.getElementById('lbl_valida_concesion').innerHTML = "";

        if ($("#cmb_concesion").val() == "") {
            document.getElementById('lbl_valida_concesion').innerHTML = "Seleccionar Concesión / Centro de cultivo / Hatchery";
            return;
        }

        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Asignar_habilitante",
            data: {
                "id_seguimiento": $('#txtId_concesion_add_seg').val(),
                "id_habilitante": $("#cmb_concesion").val(),
                "codigo_habilitante": $("#cmb_concesion :selected").text()
            },
            beforeSend: function () {
                $('#menssage_concesion').addClass("hidden");
                $('#progress_concesion').removeClass("hidden").addClass("show");
                $('#btn_Aceptar_add_concesion').attr("disabled", "disabled");
                $('#btn_can_mod_concesion').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress_concesion').removeClass("show").addClass("hidden");
                $('#btn_Aceptar_add_concesion').removeAttr("disabled", "disabled");
                $('#btn_can_mod_concesion').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#menssage_concesion").html(result).hide();
                $("#menssage_concesion").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId_concesion_add_seg').val("");
                    $('#mdlConformidad_concesion').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });
    });

    $(document).on('click', '.Asignar_almacen', function () {

        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('txt_almacen_add_seg').innerHTML = "Aviso - Asignar Almacén - ";
        document.getElementById('titulo_alma_add_seg').innerHTML = id_seguimiento[0];
        $('#txtId_alma_add_seg').val(id_seguimiento[1]);

        var ddlalmacen = $("#cmb_almacen");

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("recupera_ALMACEN_vista"))",
            data: { "ID_DIRECCION": id_seguimiento[2] },
            success: function (data) {

                ddlalmacen.html('');
                $.each(data, function (id, option) {
                    ddlalmacen.append($('<option></option>').val(option.Value).html(option.Text));
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

        $('#mdlConformidad_almacen').modal();
    });

    $('#btn_Aceptar_add_almacen').click(function () {

        document.getElementById('lbl_valida_almacen').innerHTML = "";

        if ($("#cmb_almacen").val() == "") {
            document.getElementById('lbl_valida_almacen').innerHTML = "Seleccionar Almacen";
            return;
        }

        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Asignar_habilitante",
            data: {
                "id_seguimiento": $('#txtId_alma_add_seg').val(),
                "id_habilitante": $("#cmb_almacen").val(),
                "codigo_habilitante": $("#cmb_almacen :selected").text()
            },
            beforeSend: function () {
                $('#menssage_almacen').addClass("hidden");
                $('#progress_almacen').removeClass("hidden").addClass("show");
                $('#btn_Aceptar_add_almacen').attr("disabled", "disabled");
                $('#btn_can_mod_almacen').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress_almacen').removeClass("show").addClass("hidden");
                $('#btn_Aceptar_add_almacen').removeAttr("disabled", "disabled");
                $('#btn_can_mod_almacen').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#menssage_almacen").html(result).hide();
                $("#menssage_almacen").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId_alma_add_seg').val("");
                    $('#mdlConformidad_almacen').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });

    });

    $("#grid_seguimiento").DataTable({
        "ordering": false,
        "lengthChange": false,
        "searching": false,
        //"info": false,
        "language": {
            "paginate": {
                "previous": "Anterior",
                "next": "Siguiente"
            }
        }
    });

    $("#grid_seguimiento thead tr th").eq(2).css({ "width": 31 });
    $("#grid_seguimiento thead tr th").eq(3).css({ "width": 211 });

    //$(function () {            $('#paginator ul li a').click(function () {                var url = $(this).attr('href') + '&' + $('form').serialize();                $(this).attr('href', url);            });        });

    $(document).on('click', '.Asignar', function () {

        $('#txt_id_seguimiento').val($(this).attr('id'));
        $('#mdlasignar_evaluador').modal();

    });

    $(document).on('click', '.asignar_expediente', function () {

        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('titulo_120').innerHTML = " - " + id_seguimiento[0];

        $('#txt_id_seguimiento_expediente').val(id_seguimiento[1]);

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_expediente_sin_seguimiento"))",
            data: {},
            success: function (data) {
                $("#cmb_expediente").html('');
                $.each(data, function (id, option) {
                    $("#cmb_expediente").append($('<option></option>').val(option.Value).html(option.Text));
                });
            },
            error: function (xhr, ajaxOptions, thrownError) { alert('Failed to retrieve states.'); }
        });

        $('#mdl_detalle_4').modal('show');

    });


    $(document).on('click', '.ver_protocolos_transporte', function () {

        $('#mdl_detalle_3_transporte').modal('show');
        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('titulo_100_transporte').innerHTML = " - " + id_seguimiento[0];

        $("#tbl_lista_protocolos_transporte td").remove();
        $("#tbl_lista_haccp_transporte td").remove();

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_protocolos_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    nuevoTD += '<td><ul class="list-inline" style="margin-bottom:0"><li><a href="' + option.ruta_archivo + '" target="_blank" >' + option.nombre + '</a></li></ul></td>';
                    nuevoTD += '<td>' + option.cadena_fecha_inicio + '</td>';
                    nuevoTD += '<td>' + option.cadena_fecha_fin + '</td>';
                    if (option.activo == "1") {
                        nuevoTD += '<td>ACTIVO</td>';
                        nuevoTD += '<td>'; 
                        nuevoTD += '<ul class="list-inline" style="margin-bottom:0"><li><a href="Editar_var_Protocolo_transporte/' + option.id_protocolo + '">Editar Protocolo</a></li></ul>'
                        nuevoTD += '<ul class="list-inline" style="margin-bottom:0"><li><a href="Imprimir_Protocolo_transporte/' + option.id_protocolo + '" target="_blank" >Generar Archivo</a></li></ul>'
                        nuevoTD += '<ul class="list-inline" style="margin-bottom:0"><li><a href="Subir_var_Protocolo_transporte/' + option.id_protocolo + '" target="_blank" >Subir Archivo</a></li></ul>'
                        nuevoTD += '</td>';
                    }
                    else {
                        nuevoTD += '<td>INACTIVO</td>';
                        nuevoTD += '<td></td>';
                    }

                    nuevoTD += '</tr>';

                    jQuery("#tbl_lista_protocolos_transporte").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_haccp_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    nuevoTD += '<td>' + option.nombre + '</td>';
                    nuevoTD += '</tr>';

                    jQuery("#tbl_lista_haccp_transporte").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

    });


    $(document).on('click', '.ver_protocolos', function () {

        $('#mdl_detalle_3').modal('show');
        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('titulo_100').innerHTML = " - " + id_seguimiento[0];

        $("#tbl_lista_protocolos td").remove();
        $("#tbl_lista_haccp td").remove();

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_protocolos_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    nuevoTD += '<td><ul class="list-inline" style="margin-bottom:0"><li><a href="' + option.ruta_archivo + '" target="_blank" >' + option.nombre + '</a></li></ul></td>';
                    nuevoTD += '<td>' + option.cadena_fecha_inicio + '</td>';
                    nuevoTD += '<td>' + option.cadena_fecha_fin + '</td>';
                    if (option.activo == "1") {
                        nuevoTD += '<td>ACTIVO</td>';
                    }
                    else {
                        nuevoTD += '<td>INACTIVO</td>';
                    }
                    nuevoTD += '</tr>';

                    jQuery("#tbl_lista_protocolos").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_haccp_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    nuevoTD += '<td>' + option.nombre + '</td>';
                    nuevoTD += '</tr>';

                    jQuery("#tbl_lista_haccp").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

    });

    $(document).on('click', '.Ver_PDF', function () {
        var id_documento = $(this).attr('id');
        var url = "/Habilitaciones/Ver_documento/" + id_documento;
        window.open(url, '_blank');
    });


    $(document).on('click', '.Ver_doc_adjunto', function () {
        var id_doc_adj = $(this).attr('id');
        var url = "/Habilitaciones/Ver_doc_adj/" + id_doc_adj;
        window.open(url, '_blank');
    });

    $(document).on('click', '.Ver_hijo', function () {
        var id_hijo = $(this).attr('id');
        if ($(".class_ver_hijo" + id_hijo).hasClass("hidden")) {
            $(".class_ver_hijo" + id_hijo).removeClass("hidden");
        }
        else {
            $(".class_ver_hijo" + id_hijo).addClass("hidden");
        };
    });

    $(document).on('click', '.ver_documentos_otros', function () {

        $('#mdl_detalle_2').modal('show');

        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('titulo_80').innerHTML = " - " + id_seguimiento[0];


        $("#tblrecibidos td").remove();

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_documentos_seguimiento_recibido"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    $.ajax({
                        cache: false,
                        type: "GET",
                        url: "@(Url.RouteUrl("llenar_documentos_adjuntos"))",
                        data: { "id_documento_seg": option.id_documento_seg },
                        success: function (data) {
                            var nuevoTD = '<tr>';
                            if (option.ruta_pdf == "" || option.ruta_pdf == null) {
                                nuevoTD += '<td><ul class="list-inline" style="margin-bottom:0"><li><a class="Ver_hijo" id=' + option.id_documento_seg + ' href="#" title="Detalle"><i class="blue glyphicon glyphicon-plus"></i></a></li></ul></td>';
                                nuevoTD += '<td>' + option.id_documento_seg + '</td>';
                                nuevoTD += '<td>' + option.nom_documento + '</td>';
                                nuevoTD += '<td>' + option.asunto + '</td>';
                                nuevoTD += '<td>' + option.fecha_documento_text + '</td>';
                                nuevoTD += '<td>' + option.fecha_crea_text + '</td>';
                                nuevoTD += '<td> </td>';
                                nuevoTD += '</tr>';
                            }
                            else {
                                nuevoTD += '<td><ul class="list-inline" style="margin-bottom:0"><li><a class="Ver_hijo" id=' + option.id_documento_seg + ' href="#" title="Detalle"><i class="blue glyphicon glyphicon-plus"></i></a></li></ul></td>';
                                nuevoTD += '<td>' + option.id_documento_seg + '</td>';
                                nuevoTD += '<td>' + option.nom_documento + '</td>';
                                nuevoTD += '<td>' + option.asunto + '</td>';
                                nuevoTD += '<td>' + option.fecha_documento_text + '</td>';
                                nuevoTD += '<td>' + option.fecha_crea_text + '</td>';
                                nuevoTD += '<td><ul class="list-inline" style="margin-bottom:0"><li><a class="Ver_PDF" id=' + option.id_documento_seg + ' href="#" title="PDF"> ver archivo </a></li></ul></td>';
                                nuevoTD += '</tr>';
                            }

                            jQuery("#tblrecibidos").append(nuevoTD);
                            nuevoTD = '';

                            $.each(data, function (id, var_option) {
                                nuevoTD += '<tr>';
                                nuevoTD += '<td><ul class="list-inline" style="margin-bottom:0"><li><a class="Ver_doc_adjunto" id=' + var_option.id_doc_seg_adjunto + ' href="#" title="PDF"> - ' + var_option.tipo_documento_seguimiento_adjunto.nombre + '</a></li></ul></td>';
                                nuevoTD += '</tr>';
                            });

                            if (nuevoTD == '') {
                                nuevoTD = '<tr class="class_ver_hijo' + option.id_documento_seg + ' hidden" >' +
                                           '<td colspan="7">' +
                                             '<table>'
                                                   + '<tr>'
                                                       + '<td>NO HAY DOCUMENTOS ADJUNTOS</td>'
                                                   + '</tr>'
                                               + '</table>' +
                                           '</td>' +
                                      '</tr>';
                            }
                            else {
                                nuevoTD = '<tr class="class_ver_hijo' + option.id_documento_seg + ' hidden" >'
                                           + '<td colspan="7">'
                                             + '<table>'
                                                + nuevoTD
                                             + '</table>'
                                           + '</td>'
                                      + '</tr>';
                            }
                            jQuery("#tblrecibidos").append(nuevoTD);
                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            alert('Failed to retrieve states.');
                        }
                    });
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });


        $("#tblemitidos td").remove();

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_documentos_emitidos_dhcpa_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    if (option.pdf == "1") {
                        nuevoTD += '<td><style=" text-align:center;"><ul class="list-inline" style="margin-bottom:0"><li><a href="/Habilitaciones/var_documento_dhcpa_pdf/' + option.id_doc_dhcpa + '" target="_blank"> ' + option.nom_doc + ' </a></li></ul></td>';
                    } else {
                        nuevoTD += '<td>' + option.nom_doc + '</td>';
                    }
                    nuevoTD += '<td>' + option.asunto + '</td>';
                    nuevoTD += '<td>' + option.fecha_doc_text + '</td>';
                    nuevoTD += '</tr>';

                    jQuery("#tblemitidos").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

    });

    $(document).on('click', '.ver_documentos_emitidos', function () {

        $('#mdl_detalle').modal('show');

        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('titulo_50').innerHTML = " - " + id_seguimiento[0];

        $("#tblSolicitud td").remove();

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_solicitud_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    $.ajax({
                        cache: false,
                        type: "GET",
                        url: "@(Url.RouteUrl("llenar_documentos_adjuntos_sol_insp_sdhpa"))",
                        data: { "id_sol_ins": option.id_sol_ins },
                    success: function (result) {

                        var nuevoTD = '<tr>';
                        nuevoTD += '<td style=" text-align:center;"><ul class="list-inline" style="margin-bottom:0"><li><a class="Ver_hijo_soli" id=' + option.id_sol_ins + ' href="#" title="Detalle"><i class="blue glyphicon glyphicon-plus"></i></a></li></ul></td>';
                        nuevoTD += '<td style=" text-align:center;">' + option.estado_text + '</td>';
                        nuevoTD += '<td style=" text-align:center;"><ul class="list-inline" style="margin-bottom:0"><li><a href="Imprimir_solicitud_inspeccion_transporte/' + option.id_sol_ins + '" target="_blank" >Solicitud N°' + option.numero_documento + '</a></li></ul></td>'
                        nuevoTD += '<td style=" text-align:center;">' + option.fecha_text + '</td>';
                        nuevoTD += '</tr>';

                        jQuery("#tblSolicitud").append(nuevoTD);

                        nuevoTD = '';
                        var nuevoTD_hijo = '';
                        if (result.acta_id == '0') {
                            nuevoTD_hijo = '<tr><td style="padding-right: 15px;"> - NO HAY ACTA ADJUNTA </td></tr>';
                        }
                        else {
                            nuevoTD_hijo = '<tr><td><ul class="list-inline" style="margin-bottom:0"><li>'
                                + '<a class="ver_acta_adjunta_si" id=' + result.acta_id + ' href="#" title="PDF"> - ' + result.acta_nombre + '</a></li></ul></td></tr>';
                        }
                        if (result.chkl_id == '0') {
                            nuevoTD_hijo = nuevoTD_hijo + '<tr><td style="padding-right: 15px;"> - NO HAY CHECK LIST ADJUNTA </td></tr>';
                        }
                        else {
                            nuevoTD_hijo = nuevoTD_hijo + '<tr><td><ul class="list-inline" style="margin-bottom:0"><li>'
                                + '<a class="ver_acta_chk_lis_si" id=' + result.chkl_id + ' href="#" title="PDF"> - ' + result.chkl_nombre + '</a></li></ul></td></tr>';
                        }

                        if (result.info_id == '0') {
                            nuevoTD_hijo = nuevoTD_hijo + '<tr><td style="padding-right: 15px;"> - NO HAY INFORME ADJUNTO </td></tr>';
                        }
                        else {
                            nuevoTD_hijo = nuevoTD_hijo + '<tr><td><ul class="list-inline" style="margin-bottom:0"><li>'
                                + '<a class="ver_info_adjunto_si" id=' + result.info_id + ' href="#" title="PDF"> - ' + result.info_nombre + '</a></li></ul></td></tr>';
                        }

                        if (result.prue_cantidad == '0') {
                            nuevoTD_hijo = nuevoTD_hijo + '<tr><td style="padding-right: 15px;"> - SE TIENEN ' + result.prue_cantidad + ' IMAGENES </td>'
                        }
                        else {
                            nuevoTD_hijo = nuevoTD_hijo + '<tr><td style="padding-right: 15px;"><ul class="list-inline" style="margin-bottom:0"><li>'
                                + '<a class="ver_pruebas_adjunto_si" id=' + result.id_sol_ins + ' href="#" title="VER IMAGENES"> - CANTIDAD DE IMAGENES : ' + result.prue_cantidad + '</a></li></ul></td>';
                        }

                        nuevoTD = '<tr class="class_detalle_sol' + option.id_sol_ins + ' hidden" >' +
                                   '<td colspan="7">' +
                                     '<table>'
                                           + nuevoTD_hijo
                                       + '</table>' +
                                   '</td>' +
                              '</tr>';

                        jQuery("#tblSolicitud").append(nuevoTD);
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert('Failed to retrieve states.');
                    }
                });



            });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });

        $("#tblInformes td").remove();

        $.ajax({
            cache: false,
            type: "GET",
            url: "@(Url.RouteUrl("llenar_informe_seguimiento"))",
            data: { "id_seguimiento": id_seguimiento[1] },
            success: function (data) {
                $.each(data, function (id, option) {
                    var nuevoTD = '<tr>';
                    nuevoTD += '<td>' + option.Text + '</td>';
                    nuevoTD += '<td>' + option.Value + '</td>';
                    nuevoTD += '</tr>';

                    jQuery("#tblInformes").append(nuevoTD);
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Failed to retrieve states.');
            }
        });
    });


        $(document).on('click', '.Ver_hijo_soli', function () {
            var id_hijo = $(this).attr('id');
            if ($(".class_detalle_sol" + id_hijo).hasClass("hidden")) {
                $(".class_detalle_sol" + id_hijo).removeClass("hidden");
            }
            else {
                $(".class_detalle_sol" + id_hijo).addClass("hidden");
            };
        });

        $(document).on('click', '.ver_acta_adjunta_si', function () {
            var id = $(this).attr('id');
            var url = "/Habilitaciones/ver_acta_adjunta_si/" + id;
            window.open(url, '_blank');
        });

        $(document).on('click', '.ver_acta_chk_lis_si', function () {
            var id = $(this).attr('id');
            var url = "/Habilitaciones/ver_acta_chk_lis_si/" + id;
            window.open(url, '_blank');
        });

        $(document).on('click', '.ver_info_adjunto_si', function () {
            var id = $(this).attr('id');
            var url = "/Habilitaciones/ver_info_adjunto_si/" + id;
            window.open(url, '_blank');
        });

        $(document).on('click', '.ver_pruebas_adjunto_si', function () {
            var id = $(this).attr('id');
            var url = "/Habilitaciones/ver_pruebas_adjunto_si/" + id;
            window.open(url, '_blank');

        });

    $('#btn_Aceptar').click(function () {

        $("#btn_Aceptar").attr("disabled", "disabled");
        $("#btn_can_mod").attr("disabled", "disabled");
        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Asignar_Evaluador_seguimiento",
            data: {
                "id_seguimiento": $("#txt_id_seguimiento").val(),
                "evaluador": $('#cmb_evaluador').val()
            },
            beforeSend: function () {
                $('#menssage').removeClass("show").addClass("hidden");
                $('#progress').removeClass("hidden").addClass("show");
            },
            complete: function () {
                $('#progress').removeClass("show").addClass("hidden");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#txt_id_seguimiento").val("")
                $("#mensajesPopup").hide();
                $('#btnBuscar').trigger("click");
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });
    });

    $('#btn_Aceptar_expediente').click(function () {

        $("#btn_Aceptar_expediente").attr("disabled", "disabled");
        $("#btn_can_mod_expediente").attr("disabled", "disabled");
        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Asignar_Expediente_seguimiento",
            data: {
                "id_seguimiento": $("#txt_id_seguimiento_expediente").val(),
                "id_expediente": $('#cmb_expediente').val()
            },
            beforeSend: function () {
                $('#menssage_expediente').removeClass("show").addClass("hidden");
                $('#progress_expediente').removeClass("hidden").addClass("show");
            },
            complete: function () {
                $('#progress_expediente').removeClass("show").addClass("hidden");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#txt_id_seguimiento_expediente").val("")
                $("#mensajesPopup_expediente").hide();
                $('#btnBuscar').trigger("click");
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });
    });

    $(document).on('click', '.Crear_Protocolo', function () {
        var id_expediente = $(this).attr('id').split('|');
        var url = "/Habilitaciones/variable_Nuevo_Protocolo/" + id_expediente[1];
        window.location.href = url;
    });

    $(document).on('click', '.Crear_Protocolo_Embarcacion', function () {
        var id_expediente = $(this).attr('id').split('|');
        var url = "/Habilitaciones/variable_Nuevo_Protocolo_embarcacion/" + id_expediente[1];
        window.location.href = url;
    });

    $(document).on('click', '.Crear_Protocolo_Desembarcadero', function () {
        var id_expediente = $(this).attr('id').split('|');
        var url = "/Habilitaciones/variable_Nuevo_Protocolo_desembarcadero/" + id_expediente[1];
        window.location.href = url;
    });

    $(document).on('click', '.Crear_Protocolo_Concesion', function () {
        var id_expediente = $(this).attr('id').split('|');
        var url = "/Habilitaciones/variable_Nuevo_Protocolo_concesion/" + id_expediente[0] + "/" + id_expediente[1];
        window.location.href = url;
    });

    $(document).on('click', '.Crear_Protocolo_Almacen', function () {
        var id_expediente = $(this).attr('id').split('|'); // EXPEDIENTE - ID_SEGUIMIENTO
        var url = "/Habilitaciones/variable_Nuevo_Protocolo_almacen/" + id_expediente[0] + "/" + id_expediente[1];
        window.location.href = url;
    });


    $(document).on('click', '.Crear_Protocolo_Autorizacion_instalacion', function () {
        var id_expediente = $(this).attr('id').split('|'); // EXPEDIENTE - ID_SEGUIMIENTO
        var url = "/Habilitaciones/variable_Nuevo_Protocolo_autorizacion_instalacion/" + id_expediente[0] + "/" + id_expediente[1];
        window.location.href = url;
    });

    $(document).on('click', '.Crear_Protocolo_Transporte', function () {
        var id_expediente = $(this).attr('id').split('|'); // EXPEDIENTE - ID_SEGUIMIENTO
        var url = "/Habilitaciones/variable_Nuevo_Protocolo_transporte/" + id_expediente[0] + "/" + id_expediente[1];
        window.location.href = url;
    });

    $(document).on('click', '.Crear_Protocolo_Licencia_Operacion', function () {
        var id_expediente = $(this).attr('id').split('|'); // EXPEDIENTE - ID_SEGUIMIENTO
        var url = "/Habilitaciones/variable_Nuevo_Protocolo_licencia_operacion/" + id_expediente[0] + "/" + id_expediente[1];
        window.location.href = url;
    });

    $(document).on('click', '.constancia_haccp', function () {

        var id_seguimiento = $(this).attr('id').split('|'); // expediente - id seguimiento - id oficina direccion
        document.getElementById('txt_titulo_constancia_add_seg').innerHTML = "Aviso - Crear Constancia - ";
        document.getElementById('titulo_constancia_add_seg').innerHTML = id_seguimiento[0];
        $('#txtId_constancia_add_seg').val(id_seguimiento[1]);

        $("#txt_constancia").val("");

        $('#mdl_constancia_add_seg').modal();

    });

    $('#btn_Aceptar_add_constancia').click(function () {
        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/crear_constancia_seguimiento",
            data: {
                "id_seguimiento": $('#txtId_constancia_add_seg').val(),
                "constancia": $("#txt_constancia").val()
            },
            beforeSend: function () {
                $('#progress_constancia_add').removeClass("hidden").addClass("show");
                $('#btn_Aceptar_add_constancia').attr("disabled", "disabled");
                $('#btn_can_mod_constancia').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress_constancia_add').removeClass("show").addClass("hidden");
                $('#btn_Aceptar_add_constancia').removeAttr("disabled", "disabled");
                $('#btn_can_mod_constancia').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#mensajesPopup").html(result).hide();
                $("#mensajesPopup").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId_constancia_add_seg').val('');
                    $("#mensaje_constancia_add_seg").hide();
                    $('#mdl_constancia_add_seg').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });
    });

    $(document).on('click', '.Finalizar_seguimiento', function () {


        $('#bntConfirmar2').removeClass("hidden");
        $('#btn_cancelar2').removeClass("hidden");

        var id_seguimiento = $(this).attr('id').split('|');
        document.getElementById('txt_titulo_2').innerHTML = "Aviso - Finalizar Seguimiento - ";
        document.getElementById('titulo_2').innerHTML = id_seguimiento[0];

        $("#txt_fin_tiempo_sdhpa").val("");
        $("#txt_fin_tiempo_tramite").val("");
        $("#txt_fin_observacion_final").val("");
        $("#txt_inspector_designado").val("");

        var f = new Date();
        var fechaActual = (f.getDate() < 10 ? "0" + f.getDate() : f.getDate()) + "/" + ((f.getMonth() + 1) < 10 ? "0" + (f.getMonth() + 1) : (f.getMonth() + 1)) + "/" + f.getFullYear();

        $("#txtFechauditoria").val(fechaActual);
        $("#txtFechacta").val(fechaActual);
        $("#txtFechaoficio").val(fechaActual);

        $('#chck_fecha_auditoria').attr('checked', false);
        $("#txtFechauditoria").attr("readonly", "readonly");

        $('#chck_fecha_acta').attr('checked', false);
        $("#txtFechacta").attr("readonly", "readonly");

        $('#chck_fecha_oficio').attr('checked', false);
        $("#txtFechaoficio").attr("readonly", "readonly");

        $("#txt_finalizar_con_proceso").val("");


        $("#txt_fin_tiempo_sdhpa").val(id_seguimiento[2]);
        $("#txt_fin_tiempo_tramite").val(id_seguimiento[3]);
        $("#txt_fin_observacion_final").val(id_seguimiento[4]);
        $('#txtId5').val(id_seguimiento[1]);

        $('#mdlConformidad2').modal();
    });


    $('#chck_fecha_auditoria').change(function () {
        var c = this.checked ? "true" : "false"; if (c == "true") {
            $("#txtFechauditoria").removeAttr("readonly", "readonly");
            $('#dtpFechauditoria').datetimepicker({
                pickTime: false,
                format: 'dd/MM/yyyy',
                language: 'es'
            });
        }
        else {
            $("#txtFechauditoria").attr("readonly", "readonly");
        }
    });

    $('#chck_fecha_acta').change(function () {
        var c = this.checked ? "true" : "false"; if (c == "true") {
            $("#txtFechacta").removeAttr("readonly", "readonly");
            $('#dtpFechacta').datetimepicker({
                pickTime: false,
                format: 'dd/MM/yyyy',
                language: 'es'
            });
        }
        else {
            $("#txtFechacta").attr("readonly", "readonly");
        }
    });

    $('#chck_fecha_oficio').change(function () {
        var c = this.checked ? "true" : "false"; if (c == "true") {
            $("#txtFechaoficio").removeAttr("readonly", "readonly");
            $('#dtpFechaoficio').datetimepicker({
                pickTime: false,
                format: 'dd/MM/yyyy',
                language: 'es'
            });
        }
        else {
            $("#txtFechaoficio").attr("readonly", "readonly");
        }
    });

    $('#bntConfirmar2').click(function () {

        $('#bntConfirmar2').addClass("hidden");
        $('#btn_cancelar2').addClass("hidden");

        /////////////////////////////////////////////////////////////////////////////////////////
        //variables
        /////////////////////////////////////////////////////////////////////////////////////////

        var var_fecha_auditoria = "";
        var var_fecha_acta = "";
        var var_fecha_oficio = "";

        /////////////////////////////////////////////////////////////////////////////////////////
        // fin variables
        /////////////////////////////////////////////////////////////////////////////////////////

        if ($('#chck_fecha_auditoria').prop('checked')) { var_fecha_auditoria = $("#txtFechauditoria").val(); }
        if ($('#chck_fecha_acta').prop('checked')) { var_fecha_acta = $("#txtFechacta").val(); }
        if ($('#chck_fecha_oficio').prop('checked')) { var_fecha_oficio = $("#txtFechaoficio").val(); }

        $.ajax({
            cache: false,
            type: "GET",
            url: "/Habilitaciones/Seguimiento_finalizar",
            data: {
                "id": $('#txtId5').val(),
                "tiempo_tramite": $("#txt_fin_tiempo_tramite").val(),
                "tiempo_sdhpa": $("#txt_fin_tiempo_sdhpa").val(),
                "observacion_final": $("#txt_fin_observacion_final").val(),
                "inspector_designado": $("#txt_inspector_designado").val(),
                "fecha_auditoria": var_fecha_auditoria,
                "fecha_acta": var_fecha_acta,
                "fecha_oficio": var_fecha_oficio,
                "con_proceso": $("#txt_finalizar_con_proceso").val()
            },
            beforeSend: function () {
                $('#menssage').addClass("hidden");
                $('#progress').removeClass("hidden").addClass("show");
                $('#bntConfirmar2').attr("disabled", "disabled");
                $('#btnCancelar').attr("disabled", "disabled");
            },
            complete: function () {
                $('#progress').removeClass("show").addClass("hidden");
                $('#bntConfirmar2').removeAttr("disabled", "disabled");
                $('#btnCancelar').removeAttr("disabled", "disabled");
            },
            success: function (result) {
                $('.field-validation-error').each(function () {
                    $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                    $(this).html('');
                });
                $("#mensajesPopup").html(result).hide();
                $("#mensajesPopup").slideDown(500, function () { });
                setTimeout(function () {
                    $('#txtId5').val('');
                    $("#mensajesPopup").hide();
                    $('#mdlConformidad2').modal('hide');
                    $("#btnBuscar").click();
                }, 1000);
            },
            error: function (result) {
                if (result.status == 500) {
                    $("#mensajesPopup").html(result.responseText).hide();
                    $("#mensajesPopup").slideDown(500, function () { });
                }
                else if (result.status == 400) {
                    $('.field-validation-error').each(function () {
                        $(this).removeClass("field-validation-error").addClass("field-validation-valid");
                        $(this).html('');
                    });
                    $.each(result.responseJSON.errors, function (key, value) {
                        if (value != null) {
                            var container = $('span[data-valmsg-for="' + key + '"]');
                            container.removeClass("field-validation-valid").addClass("field-validation-error");
                            container.html(value);
                        }
                    });
                    $("#mensajesPopup").html(result.responseJSON.summary).hide();
                    if (result.responseJSON.summary != "") {
                        $("#mensajesPopup").slideDown(500, function () { });
                    }
                }
            }
        });
    });

    });
</script>